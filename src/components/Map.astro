---
interface Props {
  /** Latitude of the venue */
  lat?: number;
  /** Longitude of the venue */
  lng?: number;
  /** Venue name for display */
  venueName?: string;
  /** Full address for the directions link */
  address?: string;
}

const {
  lat = 40.7128,
  lng = -74.006,
  venueName = "The Garden Pavilion",
  address = "123 Party Lane, Anytown, USA",
} = Astro.props;

const mapSrc = `https://www.openstreetmap.org/export/embed.html?bbox=${lng - 0.005}%2C${lat - 0.003}%2C${lng + 0.005}%2C${lat + 0.003}&layer=mapnik&marker=${lat}%2C${lng}`;
const directionsUrl = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`;
---

<section class="map-section" id="map">
  <div class="map-wrapper">
    <h2 class="section-title">Find Us Here</h2>
    <p class="section-subtitle">{venueName} â€” {address}</p>

    <div class="map-frame-wrapper">
      <iframe
        class="map-frame"
        src={mapSrc}
        loading="lazy"
        title={`Map showing location of ${venueName}`}
      ></iframe>
    </div>

    <a href={directionsUrl} target="_blank" rel="noopener noreferrer" class="directions-btn">
      <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polygon points="3 11 22 2 13 21 11 13 3 11" />
      </svg>
      Get Directions
    </a>
  </div>
</section>

<style>
  .map-section {
    padding: 5rem 1.5rem;
    background:
      radial-gradient(ellipse at 50% 80%, rgba(42, 127, 255, 0.04) 0%, transparent 60%),
      var(--soft-white);
  }

  .map-wrapper {
    max-width: 750px;
    margin: 0 auto;
    text-align: center;
  }

  .section-title {
    font-size: clamp(1.8rem, 5vw, 2.5rem);
    font-weight: 800;
    color: var(--navy);
    margin-bottom: 0.3rem;
  }

  .section-subtitle {
    font-size: clamp(0.9rem, 2.5vw, 1.05rem);
    color: var(--navy);
    opacity: 0.6;
    margin-bottom: 2rem;
    font-weight: 400;
  }

  .map-frame-wrapper {
    border-radius: 20px;
    overflow: hidden;
    box-shadow:
      0 4px 20px rgba(42, 127, 255, 0.1),
      0 1px 4px rgba(0, 0, 0, 0.04);
    border: 2px solid var(--blue-light);
  }

  .map-frame {
    width: 100%;
    height: 350px;
    border: none;
    display: block;
  }

  .directions-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 1.5rem;
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 700;
    color: white;
    background: linear-gradient(135deg, var(--green), var(--green-dark));
    padding: 0.75rem 2rem;
    border-radius: 50px;
    text-decoration: none;
    box-shadow: 0 3px 12px rgba(78, 194, 78, 0.3);
    transition: all 0.3s ease;
  }

  .directions-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 18px rgba(78, 194, 78, 0.4);
    color: white;
  }

  @media (max-width: 500px) {
    .map-frame {
      height: 250px;
    }
  }
</style>
